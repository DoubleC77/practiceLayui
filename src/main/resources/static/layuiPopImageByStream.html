<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
    <script src="/layui/layui.js"></script>
</head>
<body>
    <div class="site-demo-button" id="layerDemo" style="margin-bottom: 0;">
        <button data-method="confirmTrans" class="layui-btn">配置一个透明的询问框</button>
    </div>
    <script>
        layui.use(['layer'],function(){
            var $ = layui.jquery
                ,layer = layui.layer;

            $('#layerDemo .layui-btn').on('click', function(){
                //这个utl中只需要把图片流输入到HttpServletResponse输出流中即可
                /*
                    ServletOutputStream outputStream = null
                    try{
                        outputStream = response.getOutputStream()
                            ||||||||业务代码
                        //我这里场景是在生成二维码图片后把图片返回给前端，所以这里用了zxing javase的依赖包里的MatrixToImageWriter工具类
                        //你可以用其他方式写到流中去
                        MatrixToImageWriter.writeToStream(bitMatrix,picForm,outputStream)
                    }catch (Throwable t) {
                        ExceptionManager.logException(sess,t)
                        return ResponseMessageFactory.error(sess,t.getMessage())
                    }finally{
                        if(outputStream){
                            outputStream.flush()
                            outputStream.close()
                        }
                    }
                */
                var shipmentId = 1209;
                var html = "<img src='http://127.0.0.1:9001/api/qrcode/generateQRCode/" + shipmentId + "'/>"
                layer.open({
                    type: 1
                    ,title: 'is test'
                    ,closeBtn: false
                    ,offset: 'auto'
                    ,id: shipmentId //防止重复弹出
                    ,content: html
                    ,btn: '关闭全部'
                    ,btnAlign: 'c' //按钮居中
                    ,shade: 0 //不显示遮罩
                    ,yes: function(){
                        layer.closeAll();
                    }
                });

            });
        })
    </script>
</body>
</html>